// libraries
#include <Adafruit_GFX.h>
#include <Adafruit_LEDBackpack.h>

// create Alphanumeric Display object for timer (red led)
Adafruit_AlphaNum4 alpha4 = Adafruit_AlphaNum4();

// variable to hold  random number generated by the random() function
long randNum;

// button to change game mode
const int  buttonPin = 2;

// button variables will change:
int buttonPushCounter = 0;   // counter for the number of button presses
int buttonState = 0;         // current state of the button
int lastButtonState = 0;     // previous state of the button

//set initial game mode
int showType = 0;

void setup() {
   // initialize the button pin as a input:
  pinMode(buttonPin, INPUT);

  
  // initialize serial communication:
  Serial.begin(9600);

  // seed # from analog pin for random # generation
  randomSeed(analogRead(0));
}

void loop() {

 // read the pushbutton input pin:
  buttonState = digitalRead(buttonPin);

  // compare the buttonState to its previous state
  if (buttonState != lastButtonState) {
    // if the state has changed, increment the counter
    if (buttonState == HIGH) {
      // if the current state is HIGH then the button went from off to on:
      buttonPushCounter++;
      Serial.println("on");
      Serial.print("number of button pushes: ");
      Serial.println(buttonPushCounter);
      /*showType++;
      if (showType > 2)
        showType = 0;
      startShow(showType);*/
    } else {
      // if the current state is LOW then the button went from on to off:
      Serial.println("off");
    }
    // Delay a little bit to avoid bouncing
    delay(50);
  }
  // save the current state as the last state, for next time through the loop
  lastButtonState = buttonState;
}

void startShow(int i) {
  switch (i) {
    case 0: Serial.println("Array Game Mode 1");
      break;
    case 1: 
      Serial.println("Array Game Mode 2");
      arcadeMode(); 
      break;
    case 2: 
      randomNumber();Serial.println("Array Game Mode 3");
      break;
  }
}

void randomNumber() {
  /*randNum = random(0, 155);
  Serial.print("The Random Number is = ");
  Serial.println(randNum);*/
}

void arcadeMode() {
  
  //start display
  alpha4.begin(0x70);
  
  //set initial numbers on display
  /*alpha4.writeDigitAscii(0, '0');*/
  alpha4.writeDigitAscii(1, '6');
  alpha4.writeDigitAscii(2, '0');
  /*alpha4.writeDigitAscii(3, '0');*/
  
  //diplay new written values
  alpha4.writeDisplay();
  
  //set timer seconds
  int secCountdown = 60; 
  
  while( secCountdown-- ) { 
    
    //seconds delay
    delay(1000);
      
    //write time left to display data
    /*alpha4.writeDigitAscii(3, (secCountdown%10) + '0');*/
    alpha4.writeDigitAscii(2, (secCountdown%10) + '0');
    alpha4.writeDigitAscii(1, (secCountdown%100/10) + '0');
    /*alpha4.writeDigitAscii(0, (secCountdown/1000) + '0');*/
  
    //push display data to display
    alpha4.writeDisplay();
    
   }
   
  //play buzzer sound when time is up
  Serial.print("BUZZER!");

}
